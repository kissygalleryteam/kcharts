KISSY.add("gallery/kcharts/1.0/tip/index",function(b,d){var e=b.all,c="J_tip_";var a=function(f){var h=this,g={clsName:"ks-chart-default",autoRender:true,isVisable:false,boundry:{x:0,y:0,width:0,height:0},rootNode:e("body"),tpl:"",anim:{easing:"easeOut",duration:0.3},offset:{x:0,y:0},alignX:"left",alignY:"top"};h._cfg=b.mix(g,f);h.init()};b.augment(a,{init:function(){var g=this,f=g._cfg;g._data={};g._tpl=f.tpl;g.$tip;g._guId=Math.round(Math.random()*100000000);if(f.autoRender){g.render()}},getInstance:function(){return this.$tip},isVisable:function(){return this.$tip.css("display")=="none"?false:true},show:function(){var f=this;f.$tip&&f.$tip.show();return f},hide:function(){var f=this;f.$tip&&f.$tip.stop()&&f.$tip.hide();return f},moveTo:function(f,k){var g=this;g.show();var i=g.getInstance(),h=g._cfg.anim,j=g.getPos(f,k);i.css({"margin-top":j.y,"margin-left":j.x})},animateTo:function(f,l,k){var g=this;g.show();var i=g.getInstance(),h=g._cfg.anim,j=g.getPos(f,l);i.stop().animate({"margin-top":j.y,"margin-left":j.x},h.duration,h.easing,function(){k&&k()})},renderTemplate:function(h,i){var g=this,f=c+g._guId;e("#"+f).html(d(h).render(i))},getPos:function(r,p){var u=this,q=u._cfg,m=q.offset,g=p+m.y,k=r+m.x,l=q.alignX,i=q.alignY,n=u.getInstance(),f=n.outerWidth(),t=n.outerHeight(),j=q.boundry;switch(l){case"center":k=Math.round(r)+m.x-f/2;break;case"right":k=Math.round(r)+m.x-f;break}switch(i){case"middle":g=Math.round(p)+m.y-t/2;break;case"bottom":g=Math.round(p)+m.y-t;break}if(j.width&&j.height){var r=j.x||0,p=j.y||0,s=j.width,o=j.height;g=g<p?p:g;g=g>p+o?p+o:g;k=k<r?r:k;k=k>r+s?r+s:k}return{x:k,y:g}},_isExist:function(){return e("#"+c+this._guId)[0]},render:function(){var h=this,g=h._cfg,i=h._tpl,j=h._data,k=g.isVisable?"inline-block":"none",f=c+h._guId,l=g.rootNode.offset();!h._isExist()&&e('<span class="'+g.clsName+'-tip" id='+f+' style="*zoom:1;"></span>').css({display:k}).appendTo(g.rootNode);e("#"+f).css({"margin-top":l.top+g.offset.y,"margin-left":l.left+g.offset.x,position:"absolute"}).html(d(i).render(j));h.$tip=e("#"+f);return h.$tip}});return a},{requires:["gallery/template/1.0/index","./assets/tip.css"]});
