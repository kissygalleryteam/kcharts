KISSY.add("gallery/kcharts/1.1/dashboard/dashboard-ticks",function(b){function a(){a.superclass.constructor.apply(this,arguments);this.init()}b.extend(a,b.Base,{init:function(){var o=this.get("cfg");var y,A,k,h,q,p,x=o.r1||100,D=o.r2||105,l=o.R||110,J,I,z=this.get("dashboard"),v=this.get("paper"),f=z.get("cx"),d=z.get("cy"),H,e,G,c,t=[],B="";k=o.start||0;h=o.end||2*Math.PI;y=o.n||60;A=o.m;k-=Math.PI;h-=Math.PI;q=h-k;p=q/y;for(var E=0;E<=y;E+=1){if(A&&E%A==0){continue}var s=k+E*p;J=Math.cos(s);I=Math.sin(s);H=f+D*J;e=d+D*I;G=f+l*J;c=d+l*I;t.push("M",H,e,"L",G,c)}B=t.join(",");var u=v.path(B),K={};b.mix(K,o.thinStyle,true,["stroke-width","stroke"]);u.attr(K);if(A){var g=[];for(var C=0;C<=y;C+=A){var s=k+C*p;J=Math.cos(s);I=Math.sin(s);H=f+x*J;e=d+x*I;G=f+l*J;c=d+l*I;g.push("M",H,e,"L",G,c)}B=g.join(",");var w=v.path(B),F={"stroke-width":2};b.mix(F,o.thickStyle,true,["stroke-width","stroke"]);w.attr(F)}}});return a});KISSY.add("gallery/kcharts/1.1/dashboard/index",function(b,g,h,c,e){var a=b.DOM,i=b.Event,d=g;function f(){f.superclass.constructor.apply(this,arguments);var k=this.get("renderTo");if(b.isString(k)){k=b.get(k)}var j=this.get("width"),l=this.get("height");this.paper=d(k,j,l);this.init()}f.ATTRS={width:{value:400},height:{value:400},cx:{value:0},cy:{value:0}};b.extend(f,b.Base,{init:function(){var j=this.get("cx")||this.get("width")/2,o=this.get("cy")||this.get("width")/2,m=this;this.set("cx",j);this.set("cy",o);this.bindEvent();var l,n,k;l=this.get("ticks");n=this.get("pointer");k=this.get("background");if(b.isObject(k)){this.drawBg(k)}else{if(b.isFunction(k)){k.call(this)}}if(b.isObject(n)){this.drawPointer(n)}else{if(b.isFunction(n)){n.call(this)}}if(b.isObject(l)){this.drawTicks(l)}else{if(b.isFunction(l)){this.ticks=l.call(this)}}},bindEvent:function(){var j=this},drawBg:function(j){if(j.src){this.drawPictureBg(j)}else{this.drawVectorBg(j)}},drawPointer:function(j){var k=this;if(j.src){k.drawPicturePointer(j)}else{k.drawVectorPointer(j)}},drawVectorBg:function(){},drawPictureBg:function(q){var j=q.src,l=this.paper,p=this,o=this.get("cx"),m=this.get("cy"),r=q.cx,n=q.cy,t=o-r,s=m-n,k;k=l.image(j,t,s,q.width,q.height);this.set("background",k);this.background=k},drawPicturePointer:function(q){var o,n,k,u;o=this.get("cx");n=this.get("cy");k=q.cx;u=q.cy;var j=q.src,l=this.paper,t=o-k,r=n-u,m,p=this;m=l.image(j,t,r,q.width,q.height);var s=new c({pointer:m,dashboard:p,paper:l,cx:k,cy:u});p.set("pointer",s);this.pointer=s},drawVectorPointer:function(j){var k=this.get("vectorPointer"),l=this,n=this.paper;var m=new h({dashboard:l,paper:n});this.pointer=m},drawTicks:function(j){this.ticks=new e({dashboard:this,paper:this.paper,cfg:j})},pointTo:function(k,j){this.pointer&&this.pointer.pointTo(k,j)}});return f},{requires:["../raphael/index","./pointer","./pointer-pic","./dashboard-ticks"]});KISSY.add("gallery/kcharts/1.1/dashboard/pointer-pic",function(a,b){function c(){c.superclass.constructor.apply(this,arguments);var i=this.get("pointer"),h=this.get("paper"),e=this.get("dashboard"),f=this.get("cy"),g=this.get("cx"),d=e.get("cx"),j=e.get("cy");this.pointer=i;this.cx=f;this.cy=g;this.paperCx=d;this.paperCy=j}a.extend(c,b,{pointTo:function(f,e){var d=["r",f,this.paperCx,this.paperCy].join(",");if(e){this.pointer.animate({transform:d},e.ms,e.easing,e.callback)}else{this.pointer.transform(d)}return this}});return c},{requires:["./pointer"]});KISSY.add("gallery/kcharts/1.1/dashboard/pointer",function(b){function h(){h.superclass.constructor.apply(this,arguments)}var d="M",g="L",a="A";b.extend(h,b.Base,{pointTo:function(n,C){var l=this.get("paper"),r=this,z=this.get("dashboard"),j,t=z.get("cx"),s=z.get("cy"),q=z.get("pointer")||{},o=q.cx||0,m=q.cy||0,A=t+o,v=s+m,B=z.get("width"),p=z.get("height");var u={a:function(w){var y=["r",n-90,A,v].join(","),x,D;if(!r.pointer){r.pointer=i(l,A,v,w.r||5,w.R||80,w)}if(n){r.pointer.animate({transform:y},C.ms,C.easing,C.callback)}},b:function(){}};var k=(q.theme&&q.theme.name&&u[q.theme.name])||u.a;k&&k(q.theme)}});function i(s,C,A,k,u,v){var o,B,m,z,j,w,q=Math.asin(k/u);v=b.mix({fill:"#000",stroke:"#000"},v,true,["stroke","stroke-width","fill"]);o=C;B=A-u;var t=k*Math.cos(q);m=C+t;z=A-k*k/u;j=C-t;w=A-k*k/u;var D=["M",o,B,"L",m,z,"A",k,k,0,1,1,j,w,"Z"];var n=s.path(D.join(","));n.attr(v);return n}function f(n,w,u,k,p,o){var m,v,l,t,j,s,A,q;m=w,v=u-p;l=w+k,t=u;j=w,s=u+o;A=w-k,q=u;var z=["M",m,v,"L",l,t,"L",j,s,"L",A,q,"Z"];return n.path(z.join(","))}function e(v,t,s,z,u,K,J){var I,q,H,p,G,o,F,n,E,m,D,k,C,j,A,L;I=t-u/2,q=s-K,H=t+u/2,p=s-K;G=t+u/2,o=s-z,F=t+u/2,n=s+z;E=t+u/2,m=s+J,D=t-u/2,k=s+J;C=t-u/2,j=s+z,A=t-u/2,L=s-z;var l=["M",I,q,"L",H,p,"L",E,m,"L",D,k,"z"],B=l.join(",");B+=c(t,s,5);return v.path(B)}function c(j,m,l){var k="M";k=k+""+(j)+","+(m-l)+"A"+l+","+l+",0,1,1,"+(j-0.1)+","+(m-l)+"z";return k}return h});
