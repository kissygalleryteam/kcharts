KISSY.add("gallery/kcharts/1.1/sumdetailchart/index",function(g,e,m,f,n){function l(a){h("head").append("<style>v\\:*{behavior:url(#default#VML);position:absolute; display: inline-block;}</style>");this.init(a)}var h=m.all;g.augment(l,{version:"1.0",SVGTEMPLATE:{START:'<svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">',END:"</svg>",CIRCLE:'<circle cx="{{cx}}" cy="{{cy}}" r="{{r}}" fill="{{style.background}}" style="position:absolute"/>',LINE:'<line x1="{{sx}}" y1="{{sy}}" x2="{{dx}}" y2="{{dy}}" style="background-color:{{style.borderColor}};position:absolute;stroke:{{style.borderColor}};stroke-width:{{style.borderWidth}}"/>',
H1:'<text x="{{cx}}" y="{{cy}}" text-anchor="middle" fill="{{h1.color}}"><tspan font-weight="bold" font-size="{{h1.fontSize}}px">{{h1.text}}</tspan></text>',H2:'<text x="{{cx}}" y="{{cy+h2.fontSize*5/3}}" text-anchor="middle" fill="{{h2.color}}"><tspan font-weight="400" font-size="{{h2.fontSize}}px" font-family="Microsoft Yahei">{{h2.text}}</tspan></text>'},VMLTEMPLATE:{CIRCLE:'<v:roundrect style="position:absolute;display:block;left:{{left}}px;top:{{top}}px;width:{{width}}px;height:{{height}}px;"fillcolor="{{style.background}}"arcsize = ".5"stroked="f"></v:roundrect>',
LINE:'<v:line from="{{sx}}px,{{sy}}px" to="{{dx}}px,{{dy}}px" style="position:absolute;*top:{{top}}px;*left:{{left}}px;"stroke="true"strokecolor="{{style.borderColor}}"strokeweight="{{style.borderWidth}}px"></v:line>',H1:'<span style="display:block;position:absolute;width:{{2*r}}px;top:{{h1tt}}px;left:{{h1tl}}px;font-size: {{h1.fontSize}}px;font-weight: 700;color:{{h1.color}};text-align:center;">{{h1.text}}</span>',H2:'<span style="display:block;position:absolute;width:{{2*r}}px;top:{{h2tt}}px;left:{{h2tl}}px;font-size: {{h2.fontSize}}px;font-weight: 700;color:{{h2.color}};text-align:center;">{{h2.text}}</span>'},
CONFIG:{},init:function(a){this.circles=[];this.lines=[];this.CONFIG=a;8==e.ie&&this.utils.fixIE8();this.countCenter(a);lines=this.CONFIG.lines;circles=this.CONFIG.circles;var d=this.drawCircle(circles),b=this.drawLine(lines),c=this.drawH1(circles),k=this.drawH2(circles);this.paint(a.container,b+d+c+k)},utils:{cos:function(a,d){return a*Math.cos(2*(d/360)*Math.PI)},sin:function(a,d){return a*Math.sin(2*(d/360)*Math.PI)},fixIE8:function(){document.namespaces.add("v","urn:schemas-microsoft-com:vml",
"#default#VML")}},countCenter:function(){for(var a=[],d=[],b=this.CONFIG,c=b.r,k=b.meanDeg,e=b.startDeg,f=0,h=b.son.length;f<h;f++)b.son[f].cx=b.father.cx+this.utils.sin(c,e),b.son[f].cy=b.father.cy-this.utils.cos(c,e),e+=k;g.each(b.son,function(a){d.push({sx:b.father.cx,sy:b.father.cy,dx:a.cx,dy:a.cy,top:b.father.cy>=a.cy?a.cy:b.father.cy,left:b.father.cx>=a.cx?a.cx:b.father.cx,style:{borderColor:b.lineStyle.borderColor,borderWidth:b.lineStyle.borderWidth}})});this.CONFIG.lines=d;a.push(b.father);
a=a.concat(b.son);g.each(a,function(a,d){a.h1tl=a.cx-a.r;a.h1tt=a.cy-4*a.h1.fontSize/5;a.h2tl=a.cx-a.r;a.h2tt=a.cy+4*a.h1.fontSize/5});this.CONFIG.circles=a},drawCircle:function(a){render="";svgcircle=this.SVGTEMPLATE.CIRCLE;vmlcircle=this.VMLTEMPLATE.CIRCLE;g.each(a,function(a){9>e.ie?(a={left:a.cx-a.r,top:a.cy-a.r,width:2*a.r,height:2*a.r,style:a.style},render+=(new f(vmlcircle)).render(a)):render+=(new f(svgcircle)).render(a)});return render},drawLine:function(a){var d=this.SVGTEMPLATE.LINE,b=
this.VMLTEMPLATE.LINE,c="";g.each(a,function(a){c=9>e.ie?c+(new f(b)).render(a):c+(new f(d)).render(a)});return c},drawH1:function(a){var d=this.SVGTEMPLATE.H1,b=this.VMLTEMPLATE.H1,c="";g.each(a,function(a){c=9>e.ie?c+(new f(b)).render(a):c+(new f(d)).render(a)});return c},drawH2:function(a){var d=this.SVGTEMPLATE.H2,b=this.VMLTEMPLATE.H2,c="";g.each(a,function(a){c=9>e.ie?c+(new f(b)).render(a):c+(new f(d)).render(a)});return c},paint:function(a,d){var b=this.SVGTEMPLATE;d=d||"";var c="";9>e.ie?
c+=d:(c=b.START,c=c+d+b.END);8==e.ie&&(h(a).outerHTML=h(a).outerHTML);h(a).css("position","relative");h(a).html(c)},log:function(a){7>e.ie||console.log(a)}});return l},{requires:["ua","node","gallery/template/1.0/index","../raphael/index"]});
