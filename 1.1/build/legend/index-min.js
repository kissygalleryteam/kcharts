KISSY.add("gallery/kcharts/1.1/legend/index",function(g,k,m,h,n){function l(a){this._cfg=g.mix({themeCls:"ks-charts-legend",css:{},evtBind:!1},a);this.init()}var e=g.all,f=g.Event;g.augment(l,{init:function(){var a=this._cfg;if(a.container&&(this.$ctn=e(a.container),!this.$ctn[0]))return;this.render()},render:function(){var a=this,b=a._cfg,d=b.chart,c=d._innerContainer;a.renderIconContainer();a.$legend=e("."+b.themeCls,a.$ctn);a.renderIcon();a.$legend.css({marginLeft:c.width,marginTop:0}).css(b.css);
b.evtBind&&d.on("afterRender",function(){a.bindEvt()});g.log(a)},renderIcon:function(){var a=this._cfg.chart,b,d,c;"linechart"==a.chartType?e(".legend-icon",this.$legend).each(function(e,g){var f=a._stocks[g];b=f.color;d=k(this[0]);c=f.type;d.path("M0,5L16,5").attr({stroke:b.DEFAULT,"stroke-width":2});switch(c){case "triangle":$stock=h.triangle(d,8,6,5);break;case "rhomb":$stock=h.rhomb(d,8,5,8,8);break;case "square":$stock=h.rhomb(d,8,5,8,8,45);break;default:$stock=d.circle(8,5,3)}$stock.attr({fill:b.DEFAULT,
stroke:b.DEFAULT})}):e(".legend-icon",this.$legend).each(function(c,e){b=a.color.getColor(e);d=k(this[0]);d.rect(0,0,10,8,2).attr({fill:b.DEFAULT,"stroke-width":"0px"})})},renderIconContainer:function(){var a=this._cfg,b=a.chart;this._html="<div class="+a.themeCls+"><ul>";for(var d in b._datas.total)this._html+=m("<li class="+(!1==b._cfg.series[d].isShow?"clearfix disable":"clearfix")+"><div class='legend-icon'></div><div class='legend-text'>{{text}}</div></li>").render(b._cfg.series[d]);this._html+=
"</ul></div>";e(this._html).appendTo(this.$ctn);return this._html},destroy:function(){f.detach(e("li",_cfg.container),"click");this.$ctn.html("")},bindEvt:function(){var a=this._cfg.chart,b=a.chartType,d=this.$ctn;f.on(e("li",d),"click",function(c){var f=e(c.currentTarget).toggleClass("disable");c=g.indexOf(c.currentTarget,e("li",d));f.hasClass("disable")?("linechart"===b&&a.hideLine(c),"barchart"===b&&a.hideBar(c),"scatterchart"===b&&a.hidePoints(c)):("linechart"===b&&a.showLine(c),"barchart"===
b&&a.showBar(c),"scatterchart"===b&&a.showPoints(c))});f.on(e("li",d),"mouseenter",function(c){var f=e(c.currentTarget);c=g.indexOf(c.currentTarget,e("li",d));f.hasClass("disable")||"linechart"===b&&a.lineChangeTo(c)})}});return l},{requires:["gallery/kcharts/1.1/raphael/index","gallery/template/1.0/index","gallery/kcharts/1.1/tools/graphtool/index","./assets/legend.css"]});
